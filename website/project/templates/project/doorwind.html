{% extends 'project/base.html' %}
{% block content %}
{% load static %}
 <div id="daw" style="min-height:100vh;">
			<div id="door" name="door" style="width:50%; float:left; margin-top:18px;">
				<h6 style="margin-left:20px;">...Oops! You may have left the door open. Let's check it out and solve it.</h6>
			  <div id="txtsw" style="width:500px" >
				<h5>The door is: </h5><h6 id="doorstat"></h6>
				<div class="opclswitch" style="margin-left:350px" >
					<input type="checkbox" name="opclswitch" class="opclswitch-checkbox" id="myopclswitch" onclick="myFunction()">
					<label class="opclswitch-label" for="myopclswitch">
						<span class="opclswitch-inner"></span>
						<span class="opclswitch-switch"></span>
					</label>
				</div>
				
			  </div>
		<div id="mytable" style="width:500px">
			<section>

				<div  class="tbl-header" style="background-color: rgba(255,255,255,0.3);">
					<table cellpadding="0" cellspacing="0" border="0">
						<thead>
							<tr >
								<th style="padding-left:10px">Status</th>
								<th style="width:113px; padding-left:30px;">Date</th>
								<th style="padding-left:53px">Time</th>

							</tr>
						</thead>
					</table>
				</div>
				<div  class="tbl-content">
					<table cellpadding="0" cellspacing="0" border="0">
						<tbody id="doortable">

						</tbody>
					</table>
				</div>
			</section>
		</div>

	</div>
	<div id="window" name="window" style="width:50%; float:left">
		<h6 style="margin-left:20px;">...You may be wondering whether you left the window open or not... Check it out!  </h6>
		<div id="txtsw" style="width:500px;">
			<h5>The window is: </h5><h6>OPEN/CLOSED.</h6>

		</div>
		<div id="mytable" style="width:500px">
			<section>

				<div  class="tbl-header" style="background-color: rgba(255,255,255,0.3);">
					<table cellpadding="0" cellspacing="0" border="0">
						<thead>
							<tr>
								<th style="padding-left:10px">Status</th>
								<th style="width:113px; padding-left:55px;">Date</th>
								<th style="padding-left:70px">Time</th>

							</tr>
						</thead>
					</table>
				</div>
				<div  class="tbl-content">
					<table cellpadding="0" cellspacing="0" border="0">
						<tbody id="windowtable">
						</tbody>
					</table>
				</div>
			</section>
		</div>
	</div>
</div>
<script>
function objectToHTML(jsonObj) {
	// generate HTML from JSON object
	var timeRec= jsonObj['time_recorded'];
	var myDate=timeRec.substring(0,10);
	var myTime=timeRec.substring(11,19);
	var myValue=jsonObj['value'];
	if(myValue!="1on_c" && myValue!="1off_c" && myValue!="1on_uc" && myValue!="1off_uc" && myValue!="2on_c" && myValue!="2off_c" && myValue!="2on_uc" && myValue!="2off_uc" && myValue!="3on_c" && myValue!="3off_c" && myValue!="3on_uc" && myValue!="3off_uc" ){
	var tableVal=myValue;
	if(myValue == "do_c" ) { tableVar="Unlocked";}
	if(myValue == "dc_c") { tableVar ="Locked";}
	if(myValue == "do_uc") {tableVar="Unlocking failed";}
	if(myValue == "dc_uc") {tableVar="Locking failed";}
	if(myValue == "opened") {tableVar="Open";}
	if(myValue == "closed") {tableVar="Closed";}
	var tableRow = '<tr> \n' +
		'<td>' +  tableVar + '</td> \n' +
		'<td>' + myDate + '</td> \n' +
		'<td>' +  myTime + '</td> \n' +
		'</tr> \n';
	return tableRow;
	}
}
	var s= document.getElementById('doorstat');
    s.value = jsonObj['value'];
	doortable = document.getElementById('doortable');
	windowtable = document.getElementById('windowtable');
	getJSON('/api/door', objectToHTML, doortable);
	getJSON('/api/lamp', objectToHTML, doortable);
	getJSON('/api/window', objectToHTML, windowtable);
</script>
{% endblock content %}

