import serial
import lirc
from time import sleep

#Initialize infrared connection
lirc.init("myprogram")
#Initialize serial communication
ser = serial.Serial('/dev/ttyACM0', 9600)
sleep(1)

#Function to return datatype
def data(port):
        print "in data"
        ser.write(port)
        sleep(3)
        mystring = ser.readline()
        print mystring
        words = mystring.split()
        return words

print "> "
code = lirc.nextcode()
while code != ["exit"]:
	print code
	if code == ["one"]:
		#Turn on lamp
		words = data('11
	if code == ["two"]:
		#Turn off lamp
		ser.write('10')
	if code == ["three"]:
		#Read lamp status
		ser.write('12')
		sleep(3)
		lampstatus = int(ser.readline())
		print lampstatus
	if code == ["seven"]:
		#Read temperature
		ser.write('20')
		sleep(3)
		temperature = float(ser.readline())
		print temperature
	if code == ["eight"]:
		#Read light
		ser.write('30')
		sleep(3)
		light = int(ser.readline())
		print light
	if code == ["door"]:
		#Read door status
		ser.write('40')
		sleep(3)
		doorstatus = int(ser.readline())
		print doorstatus
	if code == ["window"]:
		#Read window status
		ser.write('50')
		sleep(3)
		windowstatus = int(ser.readline())
		print windowstatus
	print "> "
	code = lirc.nextcode()

#Deinitialize infrared
lirc.deinit()
#Close serial
ser.close()
	
